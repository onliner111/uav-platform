# Phase 37 - 通知协同与待办中心

## 0. Basis
- Based on: `项目最终目标.md`
- Depends on: `phases/phase-36-business-closure-outcomes-consumption.md`

## 1. Objective
将系统动作升级为组织协同动作，形成统一通知、待办、催办、升级与回执闭环。

## 2. Scope
- 消息中心与待办中心
- 告警、审批、任务的统一提醒与催办机制
- 外部通知渠道产品化接入：短信、邮件、企微/钉钉等
- 回执、超时提醒、升级与协同状态追踪
- 角色级待办聚合与优先级排序

## 3. Out of Scope
- 第三方 IM 深度定制插件生态
- 多渠道复杂营销/客户运营场景

## 4. Deliverables
- 统一消息中心与待办中心页面
- 通知渠道配置与策略管理页
- 回执/催办/升级追踪视图
- 协同闭环演示脚本

## 5. Acceptance
- 用户不登录系统也能接收关键提醒
- 告警、审批、任务形成统一待办闭环
- 组织协同从“人找系统”转为“系统推任务”

## 6. Product Delivery Standard
- 本阶段通知与待办相关 UI，必须按业务协同产品设计，面向非技术用户提供清晰、可执行的任务入口
- 本阶段必须继承并保持 Phase 32 已达成的产品化效果：中文化、对象选择驱动、统一壳层、统一组件、统一状态反馈、管理员能力下沉，不得因协同中心建设而回退
- 默认界面应聚焦待办对象、优先级、时效和下一步动作，不得把规则细节、渠道参数或内部状态码作为主视图
- 本阶段触达的旧通知或待办页面必须全部完成产品化收口，未达标内容只能下沉为管理员配置区
- 任何对既有告警、任务、审批等入口的联动修改，都必须达到“不低于 Phase 32 当前完成效果”的标准，不能因聚合待办而重新暴露工程化交互

## 7. Exit Criteria
- `ruff`, `mypy`, `pytest`, `e2e` 全绿
- 本阶段涉及的通知、待办与协同页面全部达到正式交付标准
- 本阶段触达的既有页面保持或优于 Phase 32 的产品化效果，不得出现交互、文案、导航或视觉回退
- 协同通知演示脚本可复跑

---

## 8. Priority Tuning (P0/P1/P2)

- P0：
  - `37-WP1` 待办中心与统一提醒模型
  - `37-WP2` 告警/审批/任务统一待办视图
- P1：
  - `37-WP3` 外部通知渠道配置与发送闭环
  - `37-WP4` 回执/催办/超时升级机制
- P2：
  - `37-WP5` 角色优先级排序与协同效率优化
- 执行顺序：`P0 -> P1 -> P2 -> 37-WP6`

## 9. Execution Progress

- [x] 37-WP1 待办中心与提醒模型
- [x] 37-WP2 统一待办视图
- [x] 37-WP3 外部通知渠道配置
- [x] 37-WP4 回执/催办/升级机制
- [x] 37-WP5 协同效率优化
- [x] 37-WP6 验收关账
