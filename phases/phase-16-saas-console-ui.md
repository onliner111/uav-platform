# Phase 16 - SaaS 控制台 UI

## 0. Basis
- Based on: `111.md`
- Depends on: `phases/phase-15-kpi-open-platform.md`

## 1. Objective
交付统一 SaaS 控制台，让用户以 UI 为主完成核心业务操作，并建立后续模块页面承载骨架。

## 2. Scope
- 登录/登出与租户选择
- 统一控制台骨架（顶部、侧边栏、面包屑、全局搜索占位）
- RBAC 菜单可见性控制
- 基础安全能力：CSRF 防护与会话校验策略
- 现有业务模块入口统一到控制台导航

## 3. Out of Scope
- 引入前端重型框架并重写全部页面
- 新增业务域模型（任务/资产/合规等）

## 4. Deliverables
- 控制台布局模板与导航体系
- 统一 UI 路由入口（工作台、任务、资产、合规、告警、报表、平台管理）
- 登录态与租户态传递规范
- 菜单权限矩阵与回归测试

## 5. Acceptance
- 用户可通过 UI 进入所有核心业务模块
- 不同角色看到的菜单符合 RBAC 规则
- 未登录或租户上下文缺失时可正确拦截
- 核心 UI 路径无跨租户越权

## 6. Exit Criteria
- `ruff`, `mypy`, `pytest`, `e2e` 全绿
- 控制台 UI 最小演示脚本可复跑

---

## 7. Priority Tuning (P0/P1/P2)

- P0（先做，阻塞后续 UI 承载）：
  - `16-WP1` 登录/租户切换与会话校验
  - `16-WP2` 控制台骨架与统一导航
- P1（随后完成，形成可运营控制台）：
  - `16-WP3` RBAC 菜单控制与模块入口收敛
- P2（可延后到本阶段后半）：
  - `16-WP3` 全局搜索、收藏入口、快捷操作增强
- 执行顺序：`P0 -> P1 -> P2 -> 16-WP4`

## 8. Execution Progress

- [x] 16-WP1 登录/租户切换与会话校验
- [x] 16-WP2 控制台骨架与统一导航
- [x] 16-WP3 RBAC 菜单控制与体验增强
- [x] 16-WP4 验收关账
