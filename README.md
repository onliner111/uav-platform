# UAV Platform

运行方式1：完全绕过 沙箱限制、所有人工确认、权限控制
codex --dangerously-bypass-approvals-and-sandbox

运行方式2：尽量自动执行，只修改工作目录下的文件
codex -a never -s workspace-write


重启先读取 `phases/resume.md`，及其相关文件，了解项目情况。

----------------------------------------------------------
目前状态
01-39 阶段已完成，但这不等于“真实无人机、机巢/机场、视频链路都已生产级接入完毕”。当前更准确的状态是：平台产品化已闭环，真实设备与现场基础接入有最小链路，但仍有明显二期落地工作。

  最典型的遗留项有这几类。

  1. 真实无人机接入：已做最小链路，但还不是完全落地
     phase-19-real-device-video-integration.md 明确把 Phase 19 定义为“真实设备与视频接入”，目标是打通“可真实接入、可演示、可回放”的基线。
     但从实现看，它更像“真实协议骨架 + 仿真兜底”：

  - mavlink_adapter.py 支持真实 MAVLink 连接，能尝试 pymavlink 和心跳等待。
  - 但如果依赖不可用或连接失败，会自动回退到模拟模式。
  - dji_adapter.py 更直接，代码里写明 SDK integration is intentionally deferred，并强制回到 simulation。
  所以，真实无人机这块不是“没做”，而是“做了可扩展接入基座，MAVLink 有一定真实能力，DJI 仍主要是仿真桩”。

  2. 机巢/机场接入：目前基本还是台账，不是控制集成
     项目最终目标.md 里明确写了“无人机/载荷/电池/遥控器/机场（机巢）台账”和“设备接入适配器：DJI/机巢/自研”。
     但实际已完成的 phase-09-flight-resource-asset-management.md 主要是：

  - 机巢作为资产实体纳入台账
  - 生命周期管理
  - 维护工单
  - 资源池查询

  这说明“机巢/机场”当前是被管理的资产对象，不是已打通控制协议的现场设施。还没有看到完整的：

  - 充电状态联动
  - 机场任务队列/排班

  所以如果你说“接入真实机场/机巢”，答案是：资产层做了，控制层还没有真正完成。

  3. 视频接入：有接入抽象，但不是成熟媒体平台
     phase-19-real-device-video-integration.md 包含“视频接入（RTSP/WebRTC 网关）”。
     但 phase-10-unified-map-situation-v1.md 也明确写了：实时视频转码与媒体中台建设 是 out of scope，只做“视频窗口占位与接入适配抽象”。

  这意味着现在更接近：

  - 视频流配置
  - 状态展示
  - 与态势页联动


  所以视频也属于：已打基础，不是最终落地形态。

  4. 真实现场运营验证：产品完成了，实战验证还没完成
     从项目管理角度，当前最缺的不是再堆 UI，而是“现场验证轮”。仓库里已经有很完整的产品和演示链路，但还缺少这类真实落地工作：

  - 接 1 到 2 家真实设备厂商，跑稳定性验证
  - 接 1 套真实机巢/机场，跑起降与状态联动
  - 跑真实网络环境下的视频与遥测稳定性
  - 做长时间值守、多人并发、异常恢复演练
  - 验证客户现场培训成本和真实使用路径

  如果你问“项目有没有遗留工作”，答案是：有，而且主要集中在真实设备与现场集成，不在产品化 UI 主线本身。

  按优先级看，最该补的真实落地项是

  1. DJI 真 SDK 接入，从当前仿真桩升级为真实控制与遥测链路。
  2. 机巢/机场控制适配，把“机巢资产”升级为“可联动设施”。
  3. 视频链路工程化，把当前接入抽象升级为稳定媒体能力。
  4. 做真实场景试点，把平台从“可交付”推进到“可稳定运营”。


• 下一步最合理的方向就是把“产品化一期”切到“真实接入二期”，重点不再是补后台页面，而是补现场集成和运行验证。

新阶段蓝图：

  1. 真实无人机接入强化（MAVLink 实链路固化 + DJI 真 SDK）
  2. 机巢/机场联动控制（从台账升级到控制与状态联动）
  3. 视频链路工程化（RTSP/WebRTC 稳定接入与展示）
  4. 现场试点与运行验证（真实客户环境压测、值守、异常演练）