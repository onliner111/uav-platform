{% extends "console_base.html" %}

{% block content %}
<div class="panel">
  <h2>Inspection Task List</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Status</th>
        <th>Priority</th>
        <th>Created</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for task in tasks %}
      <tr>
        <td>{{ task.id }}</td>
        <td>{{ task.name }}</td>
        <td><span class="status-pill">{{ task.status }}</span></td>
        <td>{{ task.priority }}</td>
        <td>{{ task.created_at }}</td>
        <td><a href="/ui/inspection/tasks/{{ task.id }}">Open Map</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% if can_inspection_write %}
<div class="panel">
  <h2>Create Inspection Task</h2>
  <div class="grid cols-2">
    <div>
      <label>Template</label>
      <select id="inspection-create-template">
        {% for item in templates %}
        <option value="{{ item.id }}">{{ item.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label>Task Name</label>
      <input id="inspection-create-name" placeholder="inspection task name">
    </div>
    <div>
      <label>Priority</label>
      <input id="inspection-create-priority" type="number" min="1" max="10" value="5">
    </div>
    <div>
      <label>Area Geometry (optional)</label>
      <input id="inspection-create-geom" placeholder="POINT(114.30 30.59)">
    </div>
  </div>
  <button id="inspection-create-btn" type="button" style="margin-top:10px;">Create Task</button>
  <div class="hint action-result" id="inspection-list-result" role="status" aria-live="polite"></div>
</div>
{% endif %}
{% endblock %}

{% block scripts %}
{% if can_inspection_write %}
<script src="/static/inspection_list.js"></script>
{% endif %}
{% endblock %}
